angular.module("churchSite",["ngRoute","sermons","events"]),angular.module("churchSite").config(["$routeProvider","$locationProvider",function(e,n){e.when("/sermons",{templateUrl:"/ng/sermons/sermonsMain.html",controller:"SermonsController"}).when("/admin/sermons",{templateUrl:"/ng/sermons/sermonsAdminMain.html",controller:"SermonsAdminController"}).when("/admin/sermons/add",{templateUrl:"/ng/sermons/sermonsAdd.html",controller:"SermonsAddController"}).when("/admin/sermons/edit/:sermonId",{templateUrl:"/ng/sermons/sermonsEdit.html",controller:"SermonsEditController"}).when("/admin",{templateUrl:"/ng/admin/admin.html"}).when("/events",{templateUrl:"/ng/events/events.html",controller:"EventsController"})}]),angular.module("churchSite").directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(n,r,o){var t=e(o.fileModel),s=t.assign;r.bind("change",function(){n.$apply(function(){s(n,r[0].files[0])})})}}}]),angular.module("churchSite").directive("validFile",function(){return{require:"ngModel",link:function(e,n,r,o){n.bind("change",function(){e.$apply(function(){o.$setViewValue(n.val()),o.$render()})})}}}),angular.module("events",["ngMaterial","ngMessages","ngSanitize","angular-confirm","ui.calendar","ui.bootstrap"]),angular.module("events").service("eventsSvc",["$http","$window",function(e,n){}]),angular.module("events").controller("EventsController",["$scope","sermonSvc",function(e,n){e.uiConfig={calendar:{height:800}}}]),angular.module("sermons",["ngMaterial","ngMessages","ngSanitize","com.2fdevs.videogular","com.2fdevs.videogular.plugins.controls","com.2fdevs.videogular.plugins.overlayplay","com.2fdevs.videogular.plugins.poster","smart-table","angular-confirm","ui.bootstrap"]),angular.module("sermons").service("sermonSvc",["$http","$window",function(e,n){this.getSermons=function(n){return e.get("/sermons/retrieveSermons",{params:n})},this.getSermon=function(n){return e.get("/sermons/getSermon",{params:{id:n}})},this.addSermon=function(n){return e.post("/sermons/uploadSermon",n,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},this.deleteSermon=function(n){return e.post("/sermons/removeSermon",{params:{id:n}})},this.editSermon=function(n){return e.put("/sermons/updateSermon",n,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})}}]),angular.module("sermons").controller("SermonsController",["$scope","sermonSvc",function(e,n){e.sermonTitle="Sermons"}]),angular.module("sermons").controller("SermonsMainController",["$scope","$window","sermonSvc",function(e,n,r){e.callServer=function(n){console.log(n);var o={};void 0!=n.search.predicateObject&&(o.searchTerm=n.search.predicateObject.$),void 0!=n.sort.predicate&&(o.sortPredicate=n.sort.predicate,o.sortOrder=n.sort.reverse?"descending":"ascending"),o.pageStart=n.pagination.start;var t=r.getSermons(o);t.success(function(r,o,t,s){e.sermons=r.data,n.pagination.numberOfPages=r.pageCount}),t.error(function(n,r,o,t){e.sermons=[]})}}]),angular.module("sermons").controller("SermonsAdminController",["$scope","$window","$route","sermonSvc",function(e,n,r,o){e.callServer=function(n){console.log(n);var r={};void 0!=n.search.predicateObject&&(r.searchTerm=n.search.predicateObject.$),void 0!=n.sort.predicate&&(r.sortPredicate=n.sort.predicate,r.sortOrder=n.sort.reverse?"descending":"ascending"),r.pageStart=n.pagination.start;var t=o.getSermons(r);t.success(function(r,o,t,s){e.sermons=r.data,n.pagination.numberOfPages=r.pageCount}),t.error(function(n,r,o,t){e.sermons=[]})},e.deleteSermon=function(e){var t=o.deleteSermon(e);t.success(function(e,o,t,s){n.alert("Sermon deleted."),r.reload()})}}]),angular.module("sermons").controller("SermonAudioPlayer",["$sce",function(e){var n=this;n.API=null,n.audioId=null,n.onPlayerReady=function(e){n.API=e},n.onChangeSource=function(e){n.API.play()},n.config={sources:[],theme:"bower_components/videogular-themes-default/videogular.css"},n.setAudio=function(r,o){r===n.audioId?n.API.playPause():(n.API.stop(),n.config.sources=[{src:e.trustAsResourceUrl("/sermon_audio/"+o),type:"audio/mp3"}],n.audioId=r)},n.checkAudioId=function(e){return e===n.audioId},n.isPlaying=function(){return"play"==n.API.currentState},n.isPaused=function(){return"pause"==n.API.currentState||"stop"==n.API.currentState}}]),angular.module("sermons").controller("SermonsAddController",["$scope","$location","$window","sermonSvc",function(e,n,r,o){e.title="",e.title_kr="",e.pastor="",e.date=new Date,e.description="",e.description_kr="",e.pastor_kr="",e.addSermon=function(){var r=e.audioFile,t=new FormData;t.append("file",r),t.append("title",e.title),t.append("title_kr",e.title_kr),t.append("pastor",e.pastor),t.append("date",e.date),t.append("description",e.description),t.append("description_kr",e.description_kr),t.append("pastor_kr",e.pastor_kr);var s=o.addSermon(t);s.success(function(e,r,o,t){n.path("#/admin/sermons")})}}]),angular.module("sermons").controller("SermonsEditController",["$scope","$location","$routeParams","sermonSvc",function(e,n,r,o){var t=o.getSermon(r.sermonId);t.success(function(n,r,o,t){e.id=n._id,e.title=n.title,e.title_kr=n.title_kr,e.pastor=n.pastor,e.date=new Date(n.date),e.description=n.description,e.description_kr=n.description_kr,e.pastor_kr=n.pastor_kr}),e.editSermon=function(){var r=e.audioFile,t=new FormData;t.append("id",e.id),t.append("file",r),t.append("title",e.title),t.append("title_kr",e.title_kr),t.append("pastor",e.pastor),t.append("date",e.date),t.append("description",e.description),t.append("description_kr",e.description_kr),t.append("pastor_kr",e.pastor_kr);var s=o.editSermon(t);s.success(function(e,r,o,t){n.path("/admin/sermons")})}}]);